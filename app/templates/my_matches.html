<!DOCTYPE html>
<html>
<head>
    <title>æˆ‘çš„æ¯”è³½</title>
    <style>
        .flash-message {
            margin-top: 20px;
        }
        .text-red {
            color: red;
            font-weight: bold;
        }
        .text-green {
            color: green;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <h2>ğŸ æˆ‘çš„æ¯”è³½æ¸…å–®</h2>
    {% if team %}
        <h3>éšŠä¼ï¼š{{ team.name }} ({{ team.team_type }} - {{ team.team_cycle or 'æœªåˆ†çµ„' }})</h3>

        {% if matches %}
        <table border="1">
            <tr>
                <th>å°æ‰‹éšŠä¼</th>
                <th>è£åˆ¤éšŠä¼</th>
                <th>æ¯”è³½æ™‚é–“</th>
                <th>æ¯”åˆ†</th>
                <th>å‹è² </th>
                <th>ç¢ºèªç‹€æ…‹</th>
            </tr>
            {% for match in matches %}
            <tr>
                <td>
                    {% if match.team1.id == team.id %}
                        {{ match.team2.name }}
                    {% else %}
                        {{ match.team1.name }}
                    {% endif %}
                </td>
                <td>{{ match.referee.name }}</td>
                <td>{{ match.match_time or 'å°šæœªæ’å®š' }}</td>
                <td>
                    {{ match.team1_set1 or '-' }} : {{ match.team2_set1 or '-' }} ã€
                    {{ match.team1_set2 or '-' }} : {{ match.team2_set2 or '-' }} ã€
                    {{ match.team1_set3 or '-' }} : {{ match.team2_set3 or '-' }}
                </td>
                <td>
                    {% if match.winner_id == team.id %}
                        âœ… å‹
                    {% elif match.loser_id == team.id %}
                        âŒ æ•—
                    {% else %}
                        -
                    {% endif %}
                </td>
                <td>
                    {% if match.status == 'waiting_confirm' %}
                        {% if team.id == match.team1_id and not match.team1_confirmed %}
                            <form method="POST" action="{{ url_for('main.confirm_match', match_id=match.id) }}" style="display:inline;">
                                <button type="submit">âœ… ç¢ºèª</button>
                            </form>
                            <form method="POST" action="{{ url_for('main.reject_match', match_id=match.id) }}" style="display:inline;">
                                <button type="submit" class="text-red">âŒ ä¸ç¢ºèª</button>
                            </form>
                        {% elif team.id == match.team2_id and not match.team2_confirmed %}
                            <form method="POST" action="{{ url_for('main.confirm_match', match_id=match.id) }}" style="display:inline;">
                                <button type="submit">âœ… ç¢ºèª</button>
                            </form>
                            <form method="POST" action="{{ url_for('main.reject_match', match_id=match.id) }}" style="display:inline;">
                                <button type="submit" class="text-red">âŒ ä¸ç¢ºèª</button>
                            </form>
                        {% else %}
                            âœ… å·²ç¢ºèª
                        {% endif %}
                    {% elif match.status == 'confirmed' %}
                        âœ… é›™æ–¹å·²ç¢ºèª
                    {% elif match.status == 'rejected' %}
                        âŒ æœ‰éšŠä¼ä¸ç¢ºèªï¼Œè«‹é‡æ–°ç™»éŒ„æ¯”è³½çµæœ
                    {% else %}
                        -
                    {% endif %}
                </td>
            </tr>
            {% endfor %}
        </table>
        {% else %}
            <p>ç›®å‰å°šç„¡è³½ç¨‹</p>
        {% endif %}

    {% else %}
        <p>ä½ å°šæœªåŠ å…¥ä»»ä½•éšŠä¼</p>
    {% endif %}

    <br>
    <a href="/dashboard">å›ä¸»é </a>
</body>
</html>
